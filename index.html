<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>On va manger où ?</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="icon" href="favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
      
    <!-- Load jQuery and PapaParse to read data from a CSV file -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

    <style>
      #map{ width: 900px; height: 500px; }
    </style>


    <style>
    #tabs-with-content .tabs:not(:last-child) {
      margin-bottom: 0;
    }

    #tabs-with-content .tab-content {
      padding: 1rem;
      display: none;
    }

    #tabs-with-content .tab-content.is-active {
      display: block;
    }

    .tab-content {
      min-height: 300px;
    }
  </style>


</head>

<body>

<div id="tabs-with-content">
  <div class="tabs is-centered">
    <ul>
      <li><a>Accueil</a></li>
      <!--<li><a>Plan</a></li>-->
      <li><a>À méditer</a></li>
      <li><a>Mentions légales</a></li>
      <li><a>Jouons !</a></li>
    </ul>
  </div>


  <div>
    <section class="tab-content">
      
      <h3 class="title">
        Bonjour ! Quels restaurants sont envisageables ?
      </h3>
      <p><i>Street food, cafés et bars/bistrots n'apparaissent pas. Pour toute erreur, se former à contribuer à OpenStreetMap et de la corriger.</i></p>

      <p class="subtitle">
          Le jeudi, en général, c'est Philibar. Pour tout savoir sur le burger du jour (mal daté) au Philibar :
      </p>

    <img src="philibar.jpg"/>    
      
      
      <p class="subtitle">Pour les non adeptes de steak pur boeuf (ou les non adeptes de la coriandre), le reste du menu est <a href=https://www.philibar.net/#carte>là</a> (rubrique "Le Salé" !). Contrairement à ce qui est indiqué, les hot dogs sont servis à midi, depuis quelques temps. Également, contrairement à ce qui est indiqué, la "Pièce du boucher" n'est pas végétarienne.</p>
    
    

      <!--<div id="map"  style="height:100vh;width:100%">    
      </div>-->

</section> 


<!--    <section class="tab-content">

         <iframe width="80%" height="600px" frameborder="0" allowfullscreen src="https://umap.openstreetmap.fr/fr/map/on-va-manger-ou_722404?scaleControl=false&miniMap=false&scrollWheelZoom=false&zoomControl=true&allowEdit=false&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=undefined&captionBar=false"></iframe><p><a href="//umap.openstreetmap.fr/fr/map/on-va-manger-ou_722404">Voir en plein écran</a></p>



    </section> -->



    <section class="tab-content">

      <p class="subtitle">Voyons voir :</p>
      <img src="./Oups.jpg"/>


      <p>Et plus en détail :</p>
      <img src="./Oups2.png"/>

      <h1 class="title">Alors n'attendez plus !</h1>
      <img src="./Geste.jpg"/>

    </section>



    <section class="tab-content">

    <ul>
      <li>Hébergé par Github.</li><br>
      <li>Nom de domaine enregistré chez Ionos.</li><br>
      <li>Aucun cookie inclus dans le menu (enfin je sais pas).</li><br>
      <li>Contact : x@x.fr</li><br>
    </ul>

  </section>

      <section class="tab-content">



    <h2 class="title">Objectif : trouver les 33 communes de l'EMS!</h2>
    <h4> Aucune faute n'est tolérée (sauf la commune avec "oe", il faut détacher les deux lettres).</h4>
    <h5>Désolé, il faut vérifier vous-mêmes que vous avez tout. Les communes sont classées par ordre alphabétique (sauf la dernière) et numérotées pour vous aider.</h5>

    <p class="subtitle">Bonne chance !</p>

    <input id="tentative" type="text" onchange="changeBackground(this)";/>

    <br/>

    <table  class="table">
    <thead>
        <tr>
            <th>N° - Commune</th>
        </tr>
    </thead>
    <tbody>

        <tr id="vRate" style="color:blue; display:none;"><td id="compteur_fails" style="padding :0.3em 0.5em;"></td><td style="padding :0.3em 0.5em;" id="encouragement"></td></tr>
        <tr  id="v2" style="color:blue; display:none;">
            <td style="padding :0.3em 0.5em;">1</td>
            <td style="padding :0.3em 0.5em;">Achenheim</td>
        </tr>
        <tr id="v3" style="color:blue; display:none;">
            <td style="padding :0.3em 0.5em;">2</td>
            <td style="padding :0.3em 0.5em;">Bischheim</td>
        </tr>
        <tr id="v4" style="color:blue; display:none;">
          <td style="padding :0.3em 0.5em;">3</td>
          <td style="padding :0.3em 0.5em;">Blaesheim</td>
        </tr>
        <tr id="v5" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">4</td><td style="padding :0.3em 0.5em;">Breuschwickersheim</td></tr>
        <tr id="v6" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">5</td><td style="padding :0.3em 0.5em;">Eckbolsheim</td></tr>
        <tr id="v7" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">6</td><td style="padding :0.3em 0.5em;">Eckwersheim</td></tr>
        <tr id="v8" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">7</td><td style="padding :0.3em 0.5em;">Entzheim</td></tr>
        <tr id="v9" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">8</td><td style="padding :0.3em 0.5em;">Eschau</td></tr>
        <tr id="v10" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">9</td><td style="padding :0.3em 0.5em;">Fegersheim</td></tr>
        <tr id="v11" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">10</td><td style="padding :0.3em 0.5em;">Geispolsheim</td></tr>
        <tr id="v12" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">11</td><td style="padding :0.3em 0.5em;">Hangenbieten</td></tr>
        <tr id="v13" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">12</td><td style="padding :0.3em 0.5em;">Hoenheim</td></tr>
        <tr id="v14" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">13</td><td style="padding :0.3em 0.5em;">Holtzheim</td></tr>
        <tr id="v15" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">14</td><td style="padding :0.3em 0.5em;">Illkirch-Graffenstaden</td></tr>
        <tr id="v16" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">15</td><td style="padding :0.3em 0.5em;">Kolbsheim</td></tr>
        <tr id="v17" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">16</td><td style="padding :0.3em 0.5em;">Lampertheim</td></tr>
        <tr id="v18" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">17</td><td style="padding :0.3em 0.5em;">Lingolsheim</td></tr>
        <tr id="v19" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">18</td><td style="padding :0.3em 0.5em;">Lipsheim</td></tr>
        <tr id="v20" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">19</td><td style="padding :0.3em 0.5em;">Mittelhausbergen</td></tr>
        <tr id="v21" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">20</td><td style="padding :0.3em 0.5em;">Mundolsheim</td></tr>
        <tr id="v22" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">21</td><td style="padding :0.3em 0.5em;">Niederhausbergen</td></tr>
        <tr id="v23" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">22</td><td style="padding :0.3em 0.5em;">Oberhausbergen</td></tr>
        <tr id="v24" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">23</td><td style="padding :0.3em 0.5em;">Oberschaeffolsheim</td></tr>
        <tr id="v25" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">24</td><td style="padding :0.3em 0.5em;">Osthoffen</td></tr>
        <tr id="v26" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">25</td><td style="padding :0.3em 0.5em;">Ostwald</td></tr>
        <tr id="v27" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">26</td><td style="padding :0.3em 0.5em;">Plobsheim</td></tr>
        <tr id="v28" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">27</td><td style="padding :0.3em 0.5em;">Reichstett</td></tr>
        <tr id="v29" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">28</td><td style="padding :0.3em 0.5em;">Schiltigheim</td></tr>
        <tr id="v30" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">29</td><td style="padding :0.3em 0.5em;">Souffelweyersheim</td></tr>
        <tr id="v31" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">30</td><td style="padding :0.3em 0.5em;">Strasbourg</td></tr>
        <tr id="v32" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">31</td><td style="padding :0.3em 0.5em;">Vendenheim</td></tr>
        <tr id="v33" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">32</td><td style="padding :0.3em 0.5em;">La Wantzenau</td></tr>
        <tr id="v34" style="color:blue; display:none;"><td style="padding :0.3em 0.5em;">33</td><td style="padding :0.3em 0.5em;">Wolfisheim </td></tr>

    </tbody>
</table>









  </section>


</div>

</body>


<!--- SCRIPT FOR TABS -->
<script>
  let tabsWithContent = (function () {
    let tabs = document.querySelectorAll('.tabs li');
    let tabsContent = document.querySelectorAll('.tab-content');

    let deactvateAllTabs = function () {
      tabs.forEach(function (tab) {
        tab.classList.remove('is-active');
      });
    };

    let hideTabsContent = function () {
      tabsContent.forEach(function (tabContent) {
        tabContent.classList.remove('is-active');
      });
    };

    let activateTabsContent = function (tab) {
      tabsContent[getIndex(tab)].classList.add('is-active');
    };

    let getIndex = function (el) {
      return [...el.parentElement.children].indexOf(el);
    };

    tabs.forEach(function (tab) {
      tab.addEventListener('click', function () {
        deactvateAllTabs();
        hideTabsContent();
        tab.classList.add('is-active');
        activateTabsContent(tab);
      });
    })

    tabs[0].click();
  })();
</script>

<!-- SCRIPT FOR MAP -->
 <script>
  // initialize the map
    var map = L.map('map').setView([48.5856, 7.7405], 16); //Halles

    var osmLayer = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', { // LIGNE 20
        attribution: '© OpenStreetMap contributors',
        maxZoom: 19
    });

  /* Control panel to display map layers */
  var controlLayers = L.control.layers( null, null, {
    position: "topright",
    collapsed: false
  }).addTo(map);



    map.addLayer(osmLayer);


    var useIcon = 'foodIcon.png';

    var useIcon2 = L.icon({
          iconUrl: useIcon,
          iconSize: [27,38]
        })

/*    var useIcons = [];



/*  var picIcons = [];

   for (let i=0;  i<=5 ; i++) {
    let iconLink = 'foodIcon' + i.toString() + '.png';

      picIcons.push(
        L.icon({
          iconUrl: iconLink,
          iconSize: [27,38]
        })
      )
    } */



    $.get('https://www.onvamangerou.fr/dataOSM.csv', function(csvString) {

    let pointGroupLayer = L.layerGroup().addTo(map);

    // Use PapaParse to convert string to array of objects
    var data = Papa.parse(csvString, {header: true, dynamicTyping: true}).data;    
    // For each row in data, create a marker and add it to the map
    // For each row, columns `Latitude`, `Longitude`, and `Title` are required
    for (var i in data) {
      var row = data[i];
      let marker;
      marker = L.marker([row.latitude, row.longitude])
      marker.setIcon(
        useIcon2
      );
      marker.bindTooltip(row.name + "</br>" + 
        ((row.cuisine == null) ? '/' : row.cuisine + " food")
      );

      marker.addTo(pointGroupLayer);
    }
  });
  </script>



<!-- SCRIPT FOR GAME -->


<script>


  const les_communes = ["Achenheim","Bischheim","Blaesheim","Breuschwickersheim","Eckbolsheim","Eckwersheim","Entzheim","Eschau","Fegersheim","Geispolsheim","Hangenbieten","Hoenheim","Holtzheim","Illkirch-Graffenstaden","Kolbsheim","Lampertheim","Lingolsheim","Lipsheim","Mittelhausbergen","Mundolsheim","Niederhausbergen","Oberhausbergen","Oberschaeffolsheim","Osthoffen","Ostwald","Plobsheim","Reichstett","Schiltigheim","Souffelweyersheim","Strasbourg","Vendenheim","La Wantzenau","Wolfisheim"];

  var allchar="0123456789ABCDEF";

  var compteur = 0;

  function changeBackground(obj) {

    if (les_communes.includes(tentative.value) == true) {
      // top
      var index = les_communes.indexOf(tentative.value) + 2;
      var nom_var = "v" + index.toString();
      document.getElementById(nom_var).style.display = 'block';
    }

    else {
      compteur = compteur -1;
      console.log(compteur);
      document.getElementById('compteur_fails').innerHTML = compteur.toString();

      switch (compteur) {
        default:
          document.getElementById('encouragement').innerHTML = "Raté. Essaie encore !";
          break;
        case -1:
          document.getElementById('encouragement').innerHTML = "Oups. Personne n'est parfait";
          break;
        case -2:
          document.getElementById('encouragement').innerHTML = "Jamais 2 sans 3 échecs ?";
          break;
        case -3:
          document.getElementById('encouragement').innerHTML = "Un raté prévisible";
          break;
        case -4:
          document.getElementById('encouragement').innerHTML = "Prévisible aussi, vu ton signe astro";
          break;
        case -10:
          document.getElementById('encouragement').innerHTML = "10 échecs... persévère";
          break;
        case -33:
          document.getElementById('encouragement').innerHTML = "Autant de ratés que de communes";
          break;

      }

      // pas dans la liste
      document.getElementById("vRate").style.display = 'block';

      // couleur aléatoire pour plus de fun
      var  randcol= "";
      for(var i=0; i<6; i++){
         randcol += allchar[Math.floor(Math.random()*16)];
        }
      document.getElementById("vRate").style.color = "#"+randcol;
    };
    document.getElementById("tentative").value = "";
}

  </script>






  
</html>
